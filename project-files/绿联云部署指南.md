# éƒ¨ç½²åˆ°ç»¿è”äº‘çš„æ­¥éª¤æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. æ£€æŸ¥é¡¹ç›®æ–‡ä»¶
ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š
- `package.json` - é¡¹ç›®ä¾èµ–é…ç½®
- `next.config.js` - Next.jsé…ç½®
- `tailwind.config.js` - Tailwind CSSé…ç½®
- `tsconfig.json` - TypeScripté…ç½®
- `app/` - åº”ç”¨ä»£ç ç›®å½•
- `lib/` - æ ¸å¿ƒé€»è¾‘åº“

### 2. åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®

#### ä¿®æ”¹ next.config.js
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'standalone', // ç”¨äºDockeréƒ¨ç½²
  experimental: {
    // ç§»é™¤å·²åºŸå¼ƒçš„ appDir é…ç½®
  },
  // å…¶ä»–é…ç½®...
}

module.exports = nextConfig
```

#### åˆ›å»º Dockerfile
```dockerfile
FROM node:18-alpine AS base

# Install dependencies only when needed
FROM base AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /app

COPY package.json package-lock.json* ./
RUN npm ci

# Rebuild the source code only when needed
FROM base AS builder
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .

RUN npm run build

# Production image, copy all the files and run next
FROM base AS runner
WORKDIR /app

ENV NODE_ENV production

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public

COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs

EXPOSE 3000

ENV PORT 3000
ENV HOSTNAME "0.0.0.0"

CMD ["node", "server.js"]
```

#### åˆ›å»º docker-compose.yml
```yaml
version: '3.8'

services:
  personality-assessment:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    restart: unless-stopped
    volumes:
      - ./data:/app/data  # æ•°æ®æŒä¹…åŒ–
```

### 3. åˆ›å»ºéƒ¨ç½²è„šæœ¬

#### åˆ›å»º deploy.sh
```bash
#!/bin/bash

echo "å¼€å§‹éƒ¨ç½²äººæ ¼è¯„æµ‹ç³»ç»Ÿåˆ°ç»¿è”äº‘..."

# æ„å»ºDockeré•œåƒ
echo "æ„å»ºDockeré•œåƒ..."
docker build -t personality-assessment .

# åœæ­¢æ—§å®¹å™¨
echo "åœæ­¢æ—§å®¹å™¨..."
docker-compose down

# å¯åŠ¨æ–°å®¹å™¨
echo "å¯åŠ¨æ–°å®¹å™¨..."
docker-compose up -d

echo "éƒ¨ç½²å®Œæˆï¼"
echo "è®¿é—®åœ°å€: http://ä½ çš„ç»¿è”äº‘IP:3000"
```

## ğŸ”§ ç»¿è”äº‘éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•1ï¼šé€šè¿‡Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### æ­¥éª¤1ï¼šä¸Šä¼ æ–‡ä»¶åˆ°ç»¿è”äº‘
1. å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°ç»¿è”äº‘
2. ç¡®ä¿åŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶

#### æ­¥éª¤2ï¼šå®‰è£…Docker
1. åœ¨ç»¿è”äº‘ä¸Šå®‰è£…Docker
2. å®‰è£…Docker Compose

#### æ­¥éª¤3ï¼šæ„å»ºå’Œè¿è¡Œ
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/your/project

# æ„å»ºé•œåƒ
docker build -t personality-assessment .

# è¿è¡Œå®¹å™¨
docker-compose up -d
```

### æ–¹æ³•2ï¼šç›´æ¥è¿è¡ŒNode.js

#### æ­¥éª¤1ï¼šå®‰è£…Node.js
1. åœ¨ç»¿è”äº‘ä¸Šå®‰è£…Node.js 18+
2. å®‰è£…npm

#### æ­¥éª¤2ï¼šå®‰è£…ä¾èµ–
```bash
npm install
```

#### æ­¥éª¤3ï¼šæ„å»ºé¡¹ç›®
```bash
npm run build
```

#### æ­¥éª¤4ï¼šå¯åŠ¨æœåŠ¡
```bash
npm start
```

## ğŸŒ é…ç½®å…¬ç½‘è®¿é—®

### 1. ç«¯å£æ˜ å°„
- åœ¨ç»¿è”äº‘ç®¡ç†ç•Œé¢é…ç½®ç«¯å£æ˜ å°„
- å°†å†…ç½‘3000ç«¯å£æ˜ å°„åˆ°å…¬ç½‘ç«¯å£

### 2. åŸŸåé…ç½®ï¼ˆå¯é€‰ï¼‰
- å¦‚æœæœ‰åŸŸåï¼Œå¯ä»¥é…ç½®åŸŸåè§£æ
- ä½¿ç”¨HTTPSè¯ä¹¦ï¼ˆæ¨èï¼‰

### 3. é˜²ç«å¢™è®¾ç½®
- ç¡®ä¿3000ç«¯å£å¯¹å¤–å¼€æ”¾
- é…ç½®å®‰å…¨è§„åˆ™

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. æ—¥å¿—ç›‘æ§
```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f /var/log/personality-assessment.log
```

### 2. æ€§èƒ½ç›‘æ§
- ç›‘æ§CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µ
- ç›‘æ§ç£ç›˜ç©ºé—´
- ç›‘æ§ç½‘ç»œæµé‡

### 3. æ•°æ®å¤‡ä»½
- å®šæœŸå¤‡ä»½LocalStorageæ•°æ®
- å¤‡ä»½é…ç½®æ–‡ä»¶
- å¤‡ä»½ç”¨æˆ·æ•°æ®

## ğŸ”’ å®‰å…¨é…ç½®

### 1. è®¿é—®æ§åˆ¶
- é…ç½®IPç™½åå•ï¼ˆå¦‚æœéœ€è¦ï¼‰
- è®¾ç½®è®¿é—®é¢‘ç‡é™åˆ¶
- é…ç½®ç”¨æˆ·è®¤è¯

### 2. æ•°æ®åŠ å¯†
- ä½¿ç”¨HTTPSä¼ è¾“
- åŠ å¯†æ•æ„Ÿæ•°æ®
- å®šæœŸæ›´æ–°å®‰å…¨è¡¥ä¸

## ğŸ“± ä½¿ç”¨è¯´æ˜

### è®¿é—®åœ°å€
- **å†…ç½‘è®¿é—®**ï¼š`http://ç»¿è”äº‘å†…ç½‘IP:3000`
- **å…¬ç½‘è®¿é—®**ï¼š`http://ç»¿è”äº‘å…¬ç½‘IP:3000`
- **åŸŸåè®¿é—®**ï¼š`https://yourdomain.com`ï¼ˆå¦‚æœé…ç½®äº†åŸŸåï¼‰

### ç”¨æˆ·ä½¿ç”¨
1. é¢è¯•è€…è®¿é—®é“¾æ¥å¡«å†™è¯„æµ‹
2. ç®¡ç†å‘˜ç™»å½•æŸ¥çœ‹ç»“æœ
3. æ”¯æŒæ‰‹æœºç«¯å’Œç”µè„‘ç«¯è®¿é—®

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æ— æ³•è®¿é—®**ï¼šæ£€æŸ¥ç«¯å£æ˜ å°„å’Œé˜²ç«å¢™
2. **æœåŠ¡åœæ­¢**ï¼šæ£€æŸ¥å®¹å™¨çŠ¶æ€å’Œæ—¥å¿—
3. **æ€§èƒ½é—®é¢˜**ï¼šæ£€æŸ¥èµ„æºä½¿ç”¨æƒ…å†µ
4. **æ•°æ®ä¸¢å¤±**ï¼šæ£€æŸ¥æ•°æ®æŒä¹…åŒ–é…ç½®

### è”ç³»æ”¯æŒ
- ç»¿è”äº‘æŠ€æœ¯æ”¯æŒ
- é¡¹ç›®å¼€å‘è€…æ”¯æŒ

---

*éƒ¨ç½²å®Œæˆåï¼Œä½ å°±å¯ä»¥24å°æ—¶ä¸é—´æ–­åœ°ä¸ºåŒäº‹å’Œé¢è¯•è€…æä¾›è¯„æµ‹æœåŠ¡äº†ï¼*
