# 国内部署指南

## 🚀 推荐部署方案

### 方案一：阿里云 ECS + Docker（推荐）

#### 1. 购买阿里云 ECS
- 配置：1核2G，带宽1Mbps
- 系统：Ubuntu 20.04 LTS
- 费用：约 ¥50-100/月

#### 2. 部署步骤
```bash
# 1. 安装 Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# 2. 安装 Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 3. 克隆项目
git clone https://github.com/singer2622525-netizen/personality-assessment-system.git
cd personality-assessment-system

# 4. 构建并运行
docker-compose up -d
```

#### 3. 配置域名
- 购买域名（如：personality-test.com）
- 配置 DNS 解析到服务器 IP
- 申请 SSL 证书

### 方案二：腾讯云 Serverless

#### 1. 使用腾讯云云函数
- 费用：按调用次数计费
- 优势：无需维护服务器

#### 2. 部署步骤
```bash
# 1. 安装 Serverless Framework
npm install -g serverless

# 2. 配置腾讯云凭证
serverless config credentials --provider tencent

# 3. 部署
serverless deploy
```

### 方案三：华为云 AppStage

#### 1. 使用华为云应用平台
- 支持 Next.js 应用
- 自动扩缩容
- 国内访问速度快

## 🔧 当前 Vercel 部署的优化

### 1. 添加国内 CDN
```javascript
// next.config.js
module.exports = {
  // 添加国内 CDN 加速
  assetPrefix: process.env.NODE_ENV === 'production' ? 'https://cdn.example.com' : '',
  
  // 优化图片加载
  images: {
    domains: ['cdn.example.com'],
  },
}
```

### 2. 使用国内镜像源
```dockerfile
# Dockerfile
FROM node:18-alpine

# 使用国内 npm 镜像
RUN npm config set registry https://registry.npmmirror.com

# 其余配置...
```

## 📊 各方案对比

| 方案 | 访问速度 | 稳定性 | 成本 | 维护难度 |
|------|----------|--------|------|----------|
| Vercel | 中等 | 高 | 免费 | 低 |
| 阿里云 ECS | 快 | 高 | 中等 | 中等 |
| 腾讯云 Serverless | 快 | 高 | 低 | 低 |
| 华为云 AppStage | 快 | 高 | 中等 | 低 |

## 🎯 推荐方案

**对于您的需求，我推荐：**

1. **短期**：继续使用 Vercel，测试国内访问情况
2. **长期**：迁移到阿里云 ECS + Docker 部署

## 🔍 测试当前 Vercel 访问

请先测试当前 Vercel 部署的访问情况：
- 访问速度如何？
- 是否稳定？
- 是否有访问问题？

根据测试结果，我们再决定是否需要迁移到国内服务器。
